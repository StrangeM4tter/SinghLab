import csv
import matplotlib.pyplot as plt
import numpy as np
from datetime import datetime

with open(r"path.csv", 'r', newline='') as csvfile:   ###replace path with your destination


        data = csv.reader(csvfile, delimiter=',')
        stuff = []
        time = []
        volt = []
        curr = []
        for row in data:
            for i in range(len(row)):
                if i==0:
                    time.append(row[i])
                elif i==1:
                    volt.append(row[i])
                elif i==2:
                    curr.append(row[i])
        csvfile.close()

time.pop(0)
volt.pop(0)
curr.pop(0)
length = len(volt)
curreal=[]
currdiff=((200e-9)-(10e-9))

#current generated by labview code too low to be processed, so we are making the current array ourself. This is obviously not exact, but given our range and the fact it will go through the range evenly, it is pretty close


curint=float(currdiff/length)
t=0
while t<length:
    curreal.append(curint*(t+1))
    t+=1
    
for i in volt:
    float(i)
np.array(volt)
np.array(curreal)
fig, ax = plt.subplots()
ax.yaxis.set_major_locator(plt.MaxNLocator(6))
plt.xlabel("Current (A)")
plt.ylabel("Voltage (V)")
plt.title("IV Sweep from 10 to 200 nA")
plt.plot(curreal,volt)
plt.show()
newtime=[]
for i in time:
    newtime.append(datetime.strptime(i, "%m/%d/%Y %H:%M:%S.%f"))
Timespan=abs(newtime[0]-newtime[len(newtime)-1])
print("Time elapsed: ", Timespan)
